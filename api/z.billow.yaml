name: bikesharing/api
# Default version lacking other information
version: 1.0.0
# Default type lacking other information
type: container
build:
  # Default build context is current directory
  context: .
  # Inferred from "TargetFramework" property in api.csproj
  image: dotnet:2.1-sdk-alpine
  commands:
    # Because api.csproj exists
    - dotnet build
    # Default result is same as build context
  result: .
dependencies:
  bikes: bikesharing/bikes
  reservations: bikesharing/reservations
  users: bikesharing/users
environment:
  BIKES_ENDPOINT: $(bikes.endpoint)
  RESERVATIONS_ENDPOINT: $(reservations.endpoint)
  USERS_ENDPOINT: $(users.endpoint)
# Inferred from "TargetFramework" property in api.csproj
image: dotnet:2.1-sdk-alpine
# Default command to run a .NET Core app
command: dotnet run
development:
  environment:
    # Inferred due to reference to "Microsoft.AspNetCore.App" package
    ASPNETCORE_ENVIRONMENT: Development
release:
  build:
    # Default build context is current directory
    context: .
    # Inferred from "TargetFramework" property in api.csproj
    image: dotnet:2.1-sdk-alpine
    commands:
    # Because api.csproj exists
    - dotnet publish -o .publish
    # Default build result is based on inferred publish command
    result: .publish
  # Inferred from "TargetFramework" property in api.csproj
  # and reference to "Microsoft.AspNetCore.App" package
  image: dotnet:2.1-aspnetcore-runtime-alpine
  command: dotnet api.dll
