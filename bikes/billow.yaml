name: bikesharing/bikes
dependencies:
  mysql: ./db
components:
  api:
    type: container
    environment:
      variables:
        MYSQL_CONNECTION_STRING: $(mysql.connectionString)
  functions:
    type: function-group
    directory: functions
    build:
      image: node:boron-alpine
      commands:
      - npm install
      - npm run build
    environment:
      runtime: node:boron-alpine
      variables:
        MYSQL_CONNECTION_STRING: $(mysql.connectionString)
exports:
  endpoint: $(api.endpoint)