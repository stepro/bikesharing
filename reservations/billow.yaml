name: bikesharing/reservations
dependencies:
  billing: bikesharing/billing
  bikes: bikesharing/bikes
  notifications: bikesharing/notifications
  db: ./db
components:
  api:
    group: default
    environment:
      POSTGRES_CONNECTION_STRING: $(db.connectionString)
  engine:
    build:
      context: worker
    group: default
    environment:
      BILLING_ENDPOINT: $(billing.endpoint)
      BIKES_ENDPOINT: $(bikes.endpoint)
      NOTIFICATIONS_ENDPOINT: $(notifications.endpoint)
      POSTGRES_CONNECTION_STRING: $(db.connectionString)
exports:
  endpoint: $(api.endpoint)