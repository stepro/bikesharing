name: bikesharing/billing
dependencies:
  namespace:
    type: kubernetes/namespace
    labels:
      role: backend
  db: ./db
  functions: ./functions
build:
  type: docker
deploy:
  type: kubernetes/service
  image: $(build.image):$(build.tag)
  secrets:
    MONGO:
      COLLECTION_NAME: $(db.collectionName)
      CONNECTION_STRING: $(db.connectionString)
  target: namespace
